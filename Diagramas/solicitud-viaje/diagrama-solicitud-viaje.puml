@startuml diagrama-solicitud-viaje
!theme plain
title Caso de Uso - Solicitud Detallada de Viaje con Opciones (Uber_Trip_Request)

actor "Usuario" as U
participant "UserUI" as UI
participant "TripController" as TC
participant "TripOptionController" as TOC
participant "Trip" as T

== Inicio de Solicitud de Viaje ==
note over UI
  Usuario quiere solicitar un viaje
  y debe elegir destino y tipo de servicio
end note

UI --> U: "ðŸš— SOLICITAR VIAJE UBER"
UI --> U: "Ingrese direcciÃ³n de destino:"

== BÃºsqueda de DirecciÃ³n ==
loop Hasta encontrar coincidencias
    U -> UI: Escribir direcciÃ³n (ej: "Palermo")
    UI -> TC: buscarDirecciones("Palermo")
    
    alt Direcciones encontradas âœ…
        TC --> UI: [Lista de ubicaciones]
        UI --> U: "ðŸ“ Direcciones encontradas:\n1. Palermo Soho\n2. Plaza Palermo\n3. EstaciÃ³n Palermo"
    else Sin coincidencias âŒ
        TC --> UI: lista vacÃ­a
        UI --> U: "âŒ No se encontraron coincidencias.\nIntente nuevamente."
    end
end

== SelecciÃ³n de Destino ==
loop Hasta elegir opciÃ³n vÃ¡lida
    U -> UI: Seleccionar nÃºmero (ej: "2")
    UI -> TC: esDireccionValida(direcciones, 2)
    
    alt SelecciÃ³n vÃ¡lida âœ…
        TC --> UI: true
        UI -> T: setDestination(Plaza Palermo)
        UI --> U: "âœ… Destino asignado: Plaza Palermo"
    else SelecciÃ³n invÃ¡lida âŒ
        TC --> UI: false
        UI --> U: "âŒ NÃºmero invÃ¡lido. Intente nuevamente."
    end
end

== Mostrar Opciones de Viaje ==
UI -> TOC: getAvailableOptions()
TOC --> UI: [UberX, UberPool, UberBlack]

UI --> U: "ðŸš— Opciones de viaje disponibles:\n1. UberX - $1200\n2. UberPool - $800\n3. UberBlack - $2500"

== SelecciÃ³n de Tipo de Viaje ==
loop Hasta elegir opciÃ³n vÃ¡lida
    U -> UI: Seleccionar opciÃ³n (ej: "1")
    UI -> TC: esOpcionDeViajeValida(opciones, 1)
    
    alt OpciÃ³n vÃ¡lida âœ…
        TC --> UI: true
        UI -> T: setTripOption(UberX)
        UI --> U: "âœ… OpciÃ³n seleccionada: UberX - $1200"
    else OpciÃ³n invÃ¡lida âŒ
        TC --> UI: false
        UI --> U: "âŒ OpciÃ³n invÃ¡lida. Intente nuevamente."
    end
end

== ConfirmaciÃ³n Final ==
UI --> U: "ðŸŽ‰ VIAJE CONFIGURADO\nðŸ“ Destino: Plaza Palermo\nðŸš— Servicio: UberX\nðŸ’° Precio estimado: $1200"

UI --> U: "Â¿Confirmar solicitud de viaje?"

note over U
  ConfiguraciÃ³n completada:
  
  âœ… Destino seleccionado correctamente
  âœ… Tipo de servicio elegido
  âœ… Precio confirmado
  âœ… Listo para confirmar solicitud
end note

@enduml
